# Guarded stream of the square numbers
# Free variables to pass through the environment:
#   n:  The index in the stream (result should be n²)
# Example run:
#   stack run ghopfl-exe -- -i tests/features/guarded_streams.ghopfl -E -e "idx<-9" -n 9

let
    stream ← ( ( fix f . λ x . 
        in ( x ^ 2, f ⊙ next ( x + 1 ) )
    ) 0 ) ;

in: s_idx_g idx stream
